!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.InactivityLogout=e():t.InactivityLogout=e()}(window,(function(){return function(t){var e={};function o(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=t,o.c=e,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(i,n,function(e){return t[e]}.bind(null,n));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0)}([function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(1);e.InactivityCountdownTimer=i.InactivityCountdownTimer;var n=o(2);e.ie8EventListenerPolyfill=n.ie8EventListenerPolyfill},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={idleTimeoutTime:1e4,localStorageKey:"inactivity_logout_local_storage",resetEvents:["click","mousemove","keypress"]},n=function(){function t(t){void 0===t&&(t=i),this.params=t,this.countingDown=!1,this.idleTimeoutTime=t.idleTimeoutTime||i.idleTimeoutTime,"number"==typeof t.startCountDownTimerAt?t.startCountDownTimerAt>this.idleTimeoutTime?(console.log("startCountdown time must be smaller than idleTimeoutTime, setting to idleTimeoutTime"),this.startCountDownTimerAt=this.idleTimeoutTime,this.timeoutTime=1e3):(this.startCountDownTimerAt=t.startCountDownTimerAt,this.timeoutTime=this.idleTimeoutTime-this.startCountDownTimerAt):(this.startCountDownTimerAt=0,this.timeoutTime=this.idleTimeoutTime),this.timeoutCallback=t.timeoutCallback,this.countDownCallback=t.countDownCallback,this.countDownCancelledCallback=t.countDownCancelledCallback,this.localStorageKey=t.localStorageKey||i.localStorageKey,this.resetEvents=t.resetEvents||i.resetEvents,this.redirectHREF=t.redirectHREF,this.localStorage=this.detectAndAssignLocalStorage();for(var e=0;e<this.resetEvents.length;e++)document.addEventListener(this.resetEvents[e],this,!1);window.addEventListener("load",this,!1),window.addEventListener("storage",(function(){})),this.start()}return t.prototype.start=function(){this.setLastResetTimeStamp((new Date).getTime()),this.startPrivate(this.timeoutTime)},t.prototype.stop=function(){window.clearInterval(this.idleTimeoutID)},t.prototype.cleanup=function(){for(var t=0;t<this.resetEvents.length;t++)document.removeEventListener(this.resetEvents[t],this,!1);window.removeEventListener("load",this,!1),window.removeEventListener("storage",(function(){})),this.stop()},t.prototype.handleEvent=function(t){var e=(new Date).getTime();this.setLastResetTimeStamp(e)},t.prototype.startPrivate=function(t){var e=this;this.currentTimerPrecision=t,this.idleTimeoutID=window.setInterval((function(){e.checkIdleTime()}),t)},t.prototype.resetTimer=function(t){this.stop(),this.startPrivate(t)},t.prototype.timeout=function(){this.cleanup(),this.timeoutCallback&&this.timeoutCallback(),this.redirectHREF&&this.redirect(this.redirectHREF)},t.prototype.checkIdleTime=function(){var t=(new Date).getTime()-this.getLastResetTimeStamp(),e=this.idleTimeoutTime-t;this.checkTimerPrecision(e),this.handleCountDown(e),t>=this.idleTimeoutTime&&this.timeout()},t.prototype.handleCountDown=function(t){var e=t<=this.startCountDownTimerAt;e&&this.countDownCallback?(this.countingDown=!0,this.countDownCallback(Math.abs(Math.ceil(t/1e3)))):!e&&this.countingDown&&(this.countDownCancelledCallback&&this.countDownCancelledCallback(),this.countingDown=!1)},t.prototype.checkTimerPrecision=function(t){if(t<=this.startCountDownTimerAt)1e3!==this.currentTimerPrecision&&this.resetTimer(1e3);else{var e=t-this.startCountDownTimerAt;this.resetTimer(e)}},t.prototype.getLastResetTimeStamp=function(){var t;if(this.localStorage){var e=void 0;try{e=this.localStorage.getItem(this.localStorageKey),t=parseInt(e,10)}catch(t){console.log("Error getting last reset timestamp",t)}}else t=this.lastResetTimeStamp;return t},t.prototype.setLastResetTimeStamp=function(t){if(this.localStorage)try{this.localStorage.setItem(this.localStorageKey,t.toString())}catch(t){console.log("Error setting last reset timestamp",t)}else this.lastResetTimeStamp=t},t.prototype.detectAndAssignLocalStorage=function(){var t,e=(new Date).getTime().toString()+"detectAndAssignLocalStorage",o=localStorage;try{return o.setItem(e,e),t=o.getItem(e)===e,o.removeItem(e),t&&o}catch(t){console.log("LOCAL STORAGE IS NOT AVAILABLE FOR SYNCING TIMEOUT ACROSS TABS",t)}},t.prototype.redirect=function(t){t&&(window.location.href=t)},t}();e.InactivityCountdownTimer=n},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ie8EventListenerPolyfill=function(){if(Event.prototype.preventDefault||(Event.prototype.preventDefault=function(){this.returnValue=!1}),Event.prototype.stopPropagation||(Event.prototype.stopPropagation=function(){this.cancelBubble=!0}),!Element.prototype.addEventListener){var t=[],e=function(e,o){var i=this,n=function(t){t.target=t.srcElement,t.currentTarget=i,void 0!==o.handleEvent?o.handleEvent(t):o.call(i,t)};if("DOMContentLoaded"==e){var r=function(t){"complete"==document.readyState&&n(t)};if(document.attachEvent("onreadystatechange",r),t.push({object:this,type:e,listener:o,wrapper:r}),"complete"==document.readyState){var s=new Event;s.srcElement=window,r(s)}}else this.attachEvent("on"+e,n),t.push({object:this,type:e,listener:o,wrapper:n})},o=function(e,o){for(var i=0;i<t.length;){var n=t[i];if(n.object==this&&n.type==e&&n.listener==o){"DOMContentLoaded"==e?this.detachEvent("onreadystatechange",n.wrapper):this.detachEvent("on"+e,n.wrapper),t.splice(i,1);break}++i}};Element.prototype.addEventListener=e,Element.prototype.removeEventListener=o,HTMLDocument&&(HTMLDocument.prototype.addEventListener=e,HTMLDocument.prototype.removeEventListener=o),Window&&(Window.prototype.addEventListener=e,Window.prototype.removeEventListener=o)}}()}])}));
//# sourceMappingURL=main.js.map